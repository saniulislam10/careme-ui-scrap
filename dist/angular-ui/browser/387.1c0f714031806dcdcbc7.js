(self.webpackChunkangular_ui=self.webpackChunkangular_ui||[]).push([[387],{90387:(e,t,i)=>{"use strict";i.r(t),i.d(t,{PromoPageModule:()=>w});var o=i(61116),n=i(33464),r=i(31041),a=i(80848),s=i(35366),c=i(99896),d=i(74637),g=i(31269),l=i(61613),u=i(92935),m=i(68370),p=i(35965),h=i(13070),P=i(9550),f=i(84369),v=i(41293),_=i(77307);const b=function(e){return[e,"image-gallery"]},x=function(e){return{url:e}},O=[{path:"",component:(()=>{class e{constructor(e,t,i,o,n,r,a,s,c){this.fb=e,this.activatedRoute=t,this.uiService=i,this.router=o,this.promoPageService=n,this.spinner=r,this.storageService=a,this.dialog=s,this.reloadService=c,this.isLoading=!1,this.placeholder="/assets/images/avatar/image-upload.jpg",this.needSessionDestroy=!0}ngOnInit(){this.reloadService.refreshPromoPage$.subscribe(()=>{this.getPromoPage()}),this.initFormGroup(),this.getPromoPage(),this.setFormData()}initFormGroup(){this.dataForm=this.fb.group({image:[null,r.kI.required],routerLink:[null,r.kI.required],promoName:[null]})}setFormData(){this.storageService.getStoredInput("PROMO_PAGE_INPUT")&&this.dataForm.patchValue(this.storageService.getStoredInput("PROMO_PAGE_INPUT")),history.state.images?(this.needSessionDestroy=!0,this.pickedImage=history.state.images[0].url,this.dataForm.patchValue({image:this.pickedImage})):this.pickedImage=this.placeholder}onHoldInputData(){var e;this.needSessionDestroy=!1,this.storageService.storeInputData(null===(e=this.dataForm)||void 0===e?void 0:e.value,"PROMO_PAGE_INPUT")}onSubmit(){if(this.dataForm.invalid)this.uiService.warn("Please complete all the required fields");else if(this.promoPage){const e=Object.assign(Object.assign({},this.dataForm.value),{_id:this.promoPage._id});this.updatePromoPageInfo(e)}else this.addPromoPage(this.dataForm.value)}addPromoPage(e){this.spinner.show(),this.promoPageService.addPromoPage(e).subscribe(e=>{this.uiService.success(e.message),this.spinner.hide(),this.storageService.removeSessionData("PROMO_PAGE_INPUT"),this.reloadService.needRefreshPromoPage$()},e=>{this.spinner.hide(),console.log(e)})}getPromoPage(){this.spinner.show(),this.promoPageService.getPromoPage().subscribe(e=>{var t;this.spinner.hide(),e.data&&(this.promoPage=e.data,this.pickedImage=null===(t=e.data)||void 0===t?void 0:t.image,this.dataForm.patchValue(this.promoPage))},e=>{this.spinner.hide(),console.log(e)})}updatePromoPageInfo(e){this.spinner.show(),this.promoPageService.updatePromoPageInfo(e).subscribe(e=>{this.uiService.success(e.message),this.storageService.removeSessionData("PROMO_PAGE_INPUT"),this.reloadService.needRefreshPromoPage$(),this.spinner.hide()},e=>{this.spinner.hide(),console.log(e)})}deletePromoPage(e){this.spinner.show(),this.promoPageService.deletePromoPage(e).subscribe(e=>{this.uiService.success(e.message),this.storageService.removeSessionData("PROMO_PAGE_INPUT"),this.pickedImage=this.placeholder,this.promoPage=null,this.dataForm.reset(),this.reloadService.needRefreshPromoPage$(),this.spinner.hide()},e=>{console.log(e),this.spinner.hide()})}openConfirmDialog(e){this.dialog.open(a.$,{maxWidth:"400px",data:{title:"Confirm Delete",message:"Are you sure you want delete this category?"}}).afterClosed().subscribe(e=>{var t;e&&this.deletePromoPage(null===(t=this.promoPage)||void 0===t?void 0:t._id)})}ngOnDestroy(){this.needSessionDestroy&&this.storageService.removeSessionData("PROMO_PAGE_INPUT")}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(r.qu),s.Y36(n.gz),s.Y36(c.F),s.Y36(n.F0),s.Y36(d.F),s.Y36(g.t2),s.Y36(l.V),s.Y36(u.uw),s.Y36(m.f))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-promo-page"]],decls:27,vars:11,consts:[[2,"position","relative"],[1,"header-dialog"],["fxLayout","column","fxLayoutAlign","space-around center",3,"formGroup","ngSubmit"],[1,"imag-view",3,"routerLink","state","click"],["alt","",3,"src"],["appearance","outline"],["formControlName","promoName","matInput","","placeholder","Enter Title"],["formControlName","routerLink","matInput","","placeholder","Enter router link","required",""],[1,"action"],["mat-raised-button","","color","accent","type","submit",1,"submit-btn",3,"fxHide"],["mat-raised-button","","color","warn","type","button",1,"submit-btn",3,"fxHide","click"],["bdColor","rgba(0,0,0,0.25)","size","medium","color","#fff","type","ball-clip-rotate",2,"width","100vw","height","100vh",3,"fullScreen"],[2,"color","white"]],template:function(e,t){1&e&&(s.TgZ(0,"div",0),s.TgZ(1,"div",1),s.TgZ(2,"h1"),s._uU(3,"Promo advertisement page"),s.qZA(),s.qZA(),s.TgZ(4,"form",2),s.NdJ("ngSubmit",function(){return t.onSubmit()}),s.TgZ(5,"div",3),s.NdJ("click",function(){return t.onHoldInputData()}),s._UZ(6,"img",4),s.qZA(),s.TgZ(7,"mat-form-field",5),s.TgZ(8,"mat-label"),s._uU(9,"Title"),s.qZA(),s._UZ(10,"input",6),s.qZA(),s.TgZ(11,"mat-form-field",5),s.TgZ(12,"mat-label"),s._uU(13,"Router Link"),s.qZA(),s._UZ(14,"input",7),s.qZA(),s.TgZ(15,"div",8),s.TgZ(16,"button",9),s.TgZ(17,"mat-icon"),s._uU(18,"done"),s.qZA(),s._uU(19," Save Data "),s.qZA(),s.TgZ(20,"button",10),s.NdJ("click",function(){return t.openConfirmDialog()}),s.TgZ(21,"mat-icon"),s._uU(22,"delete"),s.qZA(),s._uU(23," Delete "),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(24,"ngx-spinner",11),s.TgZ(25,"p",12),s._uU(26," Loading... "),s.qZA(),s.qZA()),2&e&&(s.xp6(4),s.Q6J("formGroup",t.dataForm),s.xp6(1),s.Q6J("routerLink",s.VKq(7,b,t.id?"../../../":"../../"))("state",s.VKq(9,x,t.router.url)),s.xp6(1),s.Q6J("src",t.pickedImage,s.LSH),s.xp6(10),s.Q6J("fxHide",t.promoPage),s.xp6(4),s.Q6J("fxHide",!t.promoPage),s.xp6(4),s.Q6J("fullScreen",!0))},directives:[r._Y,r.JL,p.xw,p.Wh,r.sg,n.rH,h.KE,h.hX,r.Fj,P.Nt,r.JJ,r.u,r.Q7,f.lW,v.b8,_.Hw,g.Ro],styles:[".header-dialog[_ngcontent-%COMP%]{margin:10px 0;width:100%;display:flex;align-items:center;justify-content:center;grid-gap:15px;gap:15px}form[_ngcontent-%COMP%]{width:100%;max-width:850px;margin:20px auto}form[_ngcontent-%COMP%]   .imag-view[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{cursor:pointer;border:2px solid #c9c9c9;width:100px;height:100px;object-fit:contain;border-radius:85px;transition:all .3s linear}form[_ngcontent-%COMP%]   .imag-view[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{opacity:.7}form[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}form[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]{display:flex;justify-content:center;grid-gap:10px;gap:10px}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]     span{color:#fff}.form-array-container[_ngcontent-%COMP%]{width:100%}.add-form-array-action[_ngcontent-%COMP%]{width:100%;text-align:left;margin-bottom:10px}.form-array-input[_ngcontent-%COMP%]{width:100%}.form-array-input[_ngcontent-%COMP%]   .single-field[_ngcontent-%COMP%]{width:100%;display:flex;grid-gap:8px;gap:8px}.form-array-input[_ngcontent-%COMP%]   .single-field[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:10px}.submit-btn[_ngcontent-%COMP%]{margin-top:25px;margin-bottom:25px;padding:4px 30px}"]}),e})()}];let Z=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[n.Bz.forChild(O)],n.Bz]}),e})();var C=i(56861),S=i(75425);let w=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[o.ez,Z,r.UX,p.ae,h.lN,_.Ps,C.q,S.m]]}),e})()},80848:(e,t,i)=>{"use strict";i.d(t,{$:()=>a});var o=i(92935),n=i(35366),r=i(84369);let a=(()=>{class e{constructor(e,t){this.dialogRef=e,this.data=t}ngOnInit(){}onConfirm(){this.dialogRef.close(!0)}onDismiss(){this.dialogRef.close(!1)}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(o.so),n.Y36(o.WI))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-confirm-dialog"]],decls:12,vars:2,consts:[[1,"dialog-container"],[1,"confirm-dialog-area"],[1,"info"],[1,"actions-around"],["mat-raised-button","","color","warn","type","button",1,"btn-round",3,"click"],["mat-raised-button","","color","primary","type","button",1,"btn-round",3,"click"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n.TgZ(2,"div",2),n.TgZ(3,"h1"),n._uU(4),n.qZA(),n.TgZ(5,"p"),n._uU(6),n.qZA(),n.qZA(),n.TgZ(7,"div",3),n.TgZ(8,"button",4),n.NdJ("click",function(){return t.onDismiss()}),n._uU(9," Cancel "),n.qZA(),n.TgZ(10,"button",5),n.NdJ("click",function(){return t.onConfirm()}),n._uU(11," Confirm "),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(4),n.Oqu(null==t.data?null:t.data.title),n.xp6(2),n.Oqu(null==t.data?null:t.data.message))},directives:[r.lW],styles:[".dialog-container[_ngcontent-%COMP%]{width:350px}.btn-round[_ngcontent-%COMP%]{margin:auto;width:150px;padding:5px;font-size:16px;border-radius:50px}.actions-around[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between;margin-top:25px}.actions-around[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]     span{color:#fff}@media only screen and (max-device-width:599px){.dialog-container[_ngcontent-%COMP%]{width:95%;margin:0 auto}.btn-round[_ngcontent-%COMP%]{margin:auto;width:130px;padding:5px;font-size:14.5px;border-radius:50px}.btn-round[_ngcontent-%COMP%]:first-child{margin-right:10px}}"]}),e})()}}]);