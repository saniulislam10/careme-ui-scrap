(self.webpackChunkangular_ui=self.webpackChunkangular_ui||[]).push([[4322],{44322:(t,e,n)=>{"use strict";n.r(e),n.d(e,{UsersModule:()=>k});var o=n(61116),a=n(33464),i=n(80848),r=n(35366),s=n(92935),c=n(94978),l=n(68370),d=n(99896),g=n(84369),u=n(77307);const m=function(t){return["edit-user",t]};function p(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"tr"),r.TgZ(1,"td"),r._uU(2),r.qZA(),r.TgZ(3,"td"),r._uU(4),r.qZA(),r.TgZ(5,"td"),r._uU(6),r.qZA(),r.TgZ(7,"td"),r._uU(8),r.qZA(),r.TgZ(9,"td"),r._uU(10),r.qZA(),r.TgZ(11,"td"),r._uU(12),r.ALo(13,"date"),r.qZA(),r.TgZ(14,"td"),r.TgZ(15,"button",8),r.NdJ("click",function(){const e=r.CHM(t).$implicit;return r.oxw().openConfirmDialog(e)}),r.TgZ(16,"mat-icon"),r._uU(17,"delete"),r.qZA(),r.qZA(),r.TgZ(18,"button",9),r.TgZ(19,"mat-icon"),r._uU(20,"edit"),r.qZA(),r.qZA(),r.qZA(),r.qZA()}if(2&t){const t=e.$implicit;r.xp6(1),r.uIk("data-label","Name"),r.xp6(1),r.Oqu(t.name),r.xp6(1),r.uIk("data-label","Username"),r.xp6(1),r.Oqu(t.username),r.xp6(1),r.uIk("data-label","Phone No"),r.xp6(1),r.Oqu(t.phoneNo),r.xp6(1),r.uIk("data-label","Role"),r.xp6(1),r.Oqu(t.role),r.xp6(1),r.uIk("data-label","Has Access"),r.xp6(1),r.Oqu(t.hasAccess?"Yes":"No"),r.xp6(1),r.uIk("data-label","Created At"),r.xp6(1),r.Oqu(r.lcZ(13,16,t.createdAt)),r.xp6(2),r.uIk("data-label","Actions"),r.xp6(1),r.Q6J("disabled",t.readOnly),r.xp6(3),r.Q6J("disabled",t.readOnly)("routerLink",r.VKq(18,m,t._id))}}const b=function(){return["add-new-user"]};let h=(()=>{class t{constructor(t,e,n,o){this.dialog=t,this.adminDataService=e,this.reloadService=n,this.uiService=o,this.users=[]}ngOnInit(){this.reloadService.refreshAdmin$.subscribe(()=>{this.getUserList()}),this.getUserList(),this.getLoginAdminInfo()}getUserList(){this.adminDataService.getAllAdmin().subscribe(t=>{this.users=t.data},t=>{console.log(t)})}getLoginAdminInfo(){this.adminDataService.getLoginAdminInfo().subscribe(t=>{this.currentUser=t.data},t=>{console.log(t)})}deleteAdmin(t){this.adminDataService.deleteAdmin(t).subscribe(t=>{this.uiService.success(t.message),this.reloadService.needRefreshAdmin$()},t=>{console.log(t)})}openConfirmDialog(t){this.dialog.open(i.$,{maxWidth:"400px",data:{title:"Confirm Delete",message:"Are you sure you want delete this category?"}}).afterClosed().subscribe(e=>{e&&this.deleteAdmin(t._id)})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(s.uw),r.Y36(c.O),r.Y36(l.f),r.Y36(d.F))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-users"]],decls:28,vars:10,consts:[[1,"top-action"],["mat-raised-button","","color","primary",3,"routerLink"],[1,"header"],[1,"center-square"],[1,"table-container"],[1,"table-head"],["scope","col"],[4,"ngFor","ngForOf"],["mat-mini-fab","","color","warn",2,"margin-right","5px",3,"disabled","click"],["mat-mini-fab","",3,"disabled","routerLink"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"button",1),r.TgZ(2,"mat-icon"),r._uU(3,"add"),r.qZA(),r._uU(4," Add New User "),r.qZA(),r.qZA(),r.TgZ(5,"div",2),r.TgZ(6,"h2"),r._uU(7,"Users List"),r.qZA(),r.qZA(),r._UZ(8,"hr",3),r.TgZ(9,"div",4),r.TgZ(10,"table"),r.TgZ(11,"thead"),r.TgZ(12,"tr",5),r.TgZ(13,"th",6),r._uU(14),r.qZA(),r.TgZ(15,"th",6),r._uU(16),r.qZA(),r.TgZ(17,"th",6),r._uU(18),r.qZA(),r.TgZ(19,"th",6),r._uU(20),r.qZA(),r.TgZ(21,"th",6),r._uU(22),r.qZA(),r.TgZ(23,"th",6),r._uU(24),r.qZA(),r.TgZ(25,"th",6),r._uU(26),r.qZA(),r.qZA(),r.qZA(),r.YNc(27,p,21,20,"tr",7),r.qZA(),r.qZA()),2&t&&(r.xp6(1),r.Q6J("routerLink",r.DdM(9,b)),r.xp6(13),r.Oqu("Name"),r.xp6(2),r.Oqu("Username"),r.xp6(2),r.Oqu("Phone No"),r.xp6(2),r.Oqu("Role"),r.xp6(2),r.Oqu("Has Access"),r.xp6(2),r.Oqu("Created At"),r.xp6(2),r.Oqu("Actions"),r.xp6(1),r.Q6J("ngForOf",e.users))},directives:[g.lW,a.rH,u.Hw,o.sg],pipes:[o.uU],styles:[".table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{font-family:Open Sans,sans-serif;border:1px solid #ccc;border-collapse:collapse;margin:0;padding:0;width:100%;table-layout:fixed;font-size:16px}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:75px;height:75px;object-fit:contain}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   caption[_ngcontent-%COMP%]{font-size:24px;margin:.5em 0 .75em;font-weight:700}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background-color:#f8f8f8;border:1px solid #ddd;padding:.35em}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.625em;text-align:center;word-wrap:anywhere}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:14px;text-transform:uppercase;background-color:#2d2d2d;color:#dbe9ff}.table-container[_ngcontent-%COMP%]   .input-in-table[_ngcontent-%COMP%]{width:100%;height:45px;border:none;outline:none;font-size:16px;font-weight:700;padding:0 15px;box-sizing:border-box;overflow:hidden;background:#b9d8fb}@media screen and (min-width:670px) and (max-width:850px){.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;margin:0 auto;border:0}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:125px;height:125px;object-fit:contain}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   caption[_ngcontent-%COMP%]{font-size:1.3em}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{border:none;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:3px solid #ddd;display:block;margin-bottom:.625em}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom:1px solid #ddd;font-family:Open Sans,sans-serif;display:block;font-size:14.5px;text-align:right}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:before{content:attr(data-label);float:left;font-weight:700;font-size:13px;text-transform:uppercase;color:#2d2d2d}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-bottom:0}.table-container[_ngcontent-%COMP%]   .input-in-table[_ngcontent-%COMP%]{width:200px;height:42px;background:#b9d8fb}.table-container[_ngcontent-%COMP%]   .td-input-md[_ngcontent-%COMP%]:before{margin-top:14px}}@media screen and (max-width:600px){.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;margin:0 auto;border:0}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:125px;height:125px;object-fit:contain}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   caption[_ngcontent-%COMP%]{font-size:1.3em}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{border:none;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:3px solid #ddd;display:block;margin-bottom:.625em}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom:1px solid #ddd;font-family:Open Sans,sans-serif;display:block;font-size:14.5px;text-align:right}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:before{content:attr(data-label);float:left;font-weight:700;font-size:13px;text-transform:uppercase;color:#2d2d2d}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-bottom:0}.table-container[_ngcontent-%COMP%]   .input-in-table[_ngcontent-%COMP%]{width:200px;height:42px;background:#b9d8fb}.table-container[_ngcontent-%COMP%]   .td-input-md[_ngcontent-%COMP%]:before{margin-top:14px}}.top-action[_ngcontent-%COMP%]{text-align:right;margin-top:16px;padding-right:16px}.top-action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]     span{color:#fff}.header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;font-family:Open Sans,sans-serif}"]}),t})();var f=n(31041),_=n(42237),Z=n(35946),O=n(35965),x=n(13070),C=n(9550),P=n(13841),q=n(41293),M=n(87064);function A(t,e){if(1&t&&(r.TgZ(0,"mat-option",15),r._uU(1),r.qZA()),2&t){const t=e.$implicit;r.Q6J("value",t.value),r.xp6(1),r.hij(" ",t.viewValue," ")}}function w(t,e){if(1&t&&(r.TgZ(0,"mat-option",15),r._uU(1),r.qZA()),2&t){const t=e.$implicit;r.Q6J("value",t.value),r.xp6(1),r.hij(" ",t.viewValue," ")}}let T=(()=>{class t{constructor(t,e,n,o,a){this.fb=t,this.activatedRoute=e,this.adminDataService=n,this.adminService=o,this.uiService=a,this.roles=_.kI,this.hasAccess=[{value:!0,viewValue:"Yes"},{value:!1,viewValue:"No"}]}ngOnInit(){this.dataForm=this.fb.group({name:[null,f.kI.required],email:[null,f.kI.email],username:[null,f.kI.required],phoneNo:[null,f.kI.required],role:[null,f.kI.required],hasAccess:[null,f.kI.required],password:[null],newPassword:[null]}),this.activatedRoute.paramMap.subscribe(t=>{this.id=t.get("id"),this.id&&this.getSingleAdminById()})}setFormValue(){this.dataForm.patchValue(Object.assign(Object.assign({},this.user),{password:null}))}getSingleAdminById(){this.adminDataService.getSingleAdminById(this.id).subscribe(t=>{this.user=t.data,this.setFormValue()},t=>{console.log(t)})}onSubmit(){var t;if(this.dataForm.invalid)this.uiService.warn("Please filed all the required field");else if(this.user)this.adminDataService.editAdmin(this.user._id,this.dataForm.value).subscribe(t=>{this.uiService.success(t.message)},t=>{this.uiService.wrong("Something went wrong!"),console.log(t)});else{if(!this.dataForm.value.password)return void this.uiService.warn("Password need");const e=Object.assign(Object.assign({},null===(t=this.dataForm)||void 0===t?void 0:t.value),{username:this.generateUsername});console.log(e),this.adminService.adminRegistration(this.dataForm.value).subscribe(t=>{t.success?(this.uiService.success(t.message),this.dataForm.reset()):this.uiService.warn(t.message)},t=>{this.uiService.wrong("Something went wrong!"),console.log(t)})}}get generateUsername(){return this.dataForm&&this.dataForm.value.username?this.dataForm.value.username.replace(/\s/g,"").trim().toLowerCase():""}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(f.qu),r.Y36(a.gz),r.Y36(c.O),r.Y36(Z.l),r.Y36(d.F))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-add-user"]],decls:55,vars:7,consts:[["fxLayout","column","fxLayoutAlign","space-around center",3,"formGroup","ngSubmit"],["appearance","outline"],["formControlName","name","matInput","","placeholder","Enter full name","required",""],["formControlName","username","matInput","","placeholder","Enter username","required",""],["formControlName","phoneNo","matInput","","placeholder","Enter phone no","required",""],["formControlName","email","matInput","","placeholder","Enter valid email","type","email","required",""],["appearance","outline","fxFlex","50",1,"w-100","px-1"],["formControlName","role","required",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","hasAccess","required",""],["appearance","outline","fxFlex","50",1,"w-100","px-1",3,"fxHide"],["formControlName","password","matInput","","placeholder","Enter password"],["appearance","outline","fxFlex","50",1,"w-100","px-1",3,"fxShow"],["formControlName","newPassword","matInput","","placeholder","Enter New password (If need)"],["mat-raised-button","","color","primary","type","submit"],[3,"value"]],template:function(t,e){1&t&&(r.TgZ(0,"form",0),r.NdJ("ngSubmit",function(){return e.onSubmit()}),r.TgZ(1,"mat-form-field",1),r.TgZ(2,"mat-label"),r._uU(3,"Name"),r.qZA(),r._UZ(4,"input",2),r.TgZ(5,"mat-error"),r._uU(6,"This field is required"),r.qZA(),r.qZA(),r.TgZ(7,"mat-form-field",1),r.TgZ(8,"mat-label"),r._uU(9,"Username"),r.qZA(),r._UZ(10,"input",3),r.TgZ(11,"mat-hint"),r._uU(12),r.qZA(),r.TgZ(13,"mat-error"),r._uU(14,"This field is required"),r.qZA(),r.qZA(),r.TgZ(15,"mat-form-field",1),r.TgZ(16,"mat-label"),r._uU(17,"Phone No"),r.qZA(),r._UZ(18,"input",4),r.TgZ(19,"mat-error"),r._uU(20,"This field is required"),r.qZA(),r.qZA(),r.TgZ(21,"mat-form-field",1),r.TgZ(22,"mat-label"),r._uU(23,"Email"),r.qZA(),r._UZ(24,"input",5),r.TgZ(25,"mat-error"),r._uU(26,"Enter a valid email address"),r.qZA(),r.qZA(),r.TgZ(27,"mat-form-field",6),r.TgZ(28,"mat-label"),r._uU(29,"Role"),r.qZA(),r.TgZ(30,"mat-select",7),r.YNc(31,A,2,2,"mat-option",8),r.qZA(),r.TgZ(32,"mat-error"),r._uU(33,"This field is required."),r.qZA(),r.qZA(),r.TgZ(34,"mat-form-field",6),r.TgZ(35,"mat-label"),r._uU(36,"Has Access"),r.qZA(),r.TgZ(37,"mat-select",9),r.YNc(38,w,2,2,"mat-option",8),r.qZA(),r.TgZ(39,"mat-error"),r._uU(40,"This field is required."),r.qZA(),r.qZA(),r.TgZ(41,"mat-form-field",10),r.TgZ(42,"mat-label"),r._uU(43,"Password"),r.qZA(),r._UZ(44,"input",11),r.TgZ(45,"mat-error"),r._uU(46,"This field is required."),r.qZA(),r.qZA(),r.TgZ(47,"mat-form-field",12),r.TgZ(48,"mat-label"),r._uU(49,"Update New Password"),r.qZA(),r._UZ(50,"input",13),r.TgZ(51,"mat-error"),r._uU(52,"This field is required."),r.qZA(),r.qZA(),r.TgZ(53,"button",14),r._uU(54),r.qZA(),r.qZA()),2&t&&(r.Q6J("formGroup",e.dataForm),r.xp6(12),r.Oqu(e.generateUsername?"Username will be :"+e.generateUsername:""),r.xp6(19),r.Q6J("ngForOf",e.roles),r.xp6(7),r.Q6J("ngForOf",e.hasAccess),r.xp6(3),r.Q6J("fxHide",e.user),r.xp6(6),r.Q6J("fxShow",e.user),r.xp6(7),r.hij(" ",e.id?"Update User":"Add User"," "))},directives:[f._Y,f.JL,O.xw,O.Wh,f.sg,x.KE,x.hX,f.Fj,C.Nt,f.JJ,f.u,f.Q7,x.TO,x.bx,O.yH,P.gD,o.sg,q.b8,g.lW,M.ey],styles:["form[_ngcontent-%COMP%]{width:450px;margin:45px auto}form[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),t})();const v=[{path:"",component:h},{path:"add-new-user",component:T},{path:"edit-user/:id",component:T}];let U=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[a.Bz.forChild(v)],a.Bz]}),t})();var y=n(56861),S=n(77154);let k=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[o.ez,U,f.UX,y.q,S.o9]]}),t})()},80848:(t,e,n)=>{"use strict";n.d(e,{$:()=>r});var o=n(92935),a=n(35366),i=n(84369);let r=(()=>{class t{constructor(t,e){this.dialogRef=t,this.data=e}ngOnInit(){}onConfirm(){this.dialogRef.close(!0)}onDismiss(){this.dialogRef.close(!1)}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(o.so),a.Y36(o.WI))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-confirm-dialog"]],decls:12,vars:2,consts:[[1,"dialog-container"],[1,"confirm-dialog-area"],[1,"info"],[1,"actions-around"],["mat-raised-button","","color","warn","type","button",1,"btn-round",3,"click"],["mat-raised-button","","color","primary","type","button",1,"btn-round",3,"click"]],template:function(t,e){1&t&&(a.TgZ(0,"div",0),a.TgZ(1,"div",1),a.TgZ(2,"div",2),a.TgZ(3,"h1"),a._uU(4),a.qZA(),a.TgZ(5,"p"),a._uU(6),a.qZA(),a.qZA(),a.TgZ(7,"div",3),a.TgZ(8,"button",4),a.NdJ("click",function(){return e.onDismiss()}),a._uU(9," Cancel "),a.qZA(),a.TgZ(10,"button",5),a.NdJ("click",function(){return e.onConfirm()}),a._uU(11," Confirm "),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&t&&(a.xp6(4),a.Oqu(null==e.data?null:e.data.title),a.xp6(2),a.Oqu(null==e.data?null:e.data.message))},directives:[i.lW],styles:[".dialog-container[_ngcontent-%COMP%]{width:350px}.btn-round[_ngcontent-%COMP%]{margin:auto;width:150px;padding:5px;font-size:16px;border-radius:50px}.actions-around[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between;margin-top:25px}.actions-around[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]     span{color:#fff}@media only screen and (max-device-width:599px){.dialog-container[_ngcontent-%COMP%]{width:95%;margin:0 auto}.btn-round[_ngcontent-%COMP%]{margin:auto;width:130px;padding:5px;font-size:14.5px;border-radius:50px}.btn-round[_ngcontent-%COMP%]:first-child{margin-right:10px}}"]}),t})()}}]);