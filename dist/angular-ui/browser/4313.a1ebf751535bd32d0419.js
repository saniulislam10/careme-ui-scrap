(self.webpackChunkangular_ui=self.webpackChunkangular_ui||[]).push([[4313],{74313:(t,e,n)=>{"use strict";n.r(e),n.d(e,{RolesModule:()=>I});var o=n(61116),i=n(33464),a=n(42237),r=n(35366),c=n(92935),l=n(94978),s=n(68370),d=n(99896),g=n(31269);function p(t,e){if(1&t&&(r.TgZ(0,"tr"),r.TgZ(1,"td"),r._uU(2),r.qZA(),r.qZA()),2&t){const t=e.$implicit;r.xp6(1),r.uIk("data-label","Name"),r.xp6(1),r.Oqu(t.viewValue)}}let u=(()=>{class t{constructor(t,e,n,o,i){this.dialog=t,this.adminDataService=e,this.reloadService=n,this.uiService=o,this.spinner=i,this.adminRoles=a.kI}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(c.uw),r.Y36(l.O),r.Y36(s.f),r.Y36(d.F),r.Y36(g.t2))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-users"]],decls:14,vars:3,consts:[[1,"header"],[1,"center-square"],[1,"table-container"],[1,"table-head"],["scope","col"],[4,"ngFor","ngForOf"],["bdColor","rgba(0,0,0,0.25)","size","medium","color","#fff","type","ball-clip-rotate",2,"width","100vw","height","100vh",3,"fullScreen"],[2,"color","white"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"h2"),r._uU(2,"Admin Roles"),r.qZA(),r.qZA(),r._UZ(3,"hr",1),r.TgZ(4,"div",2),r.TgZ(5,"table"),r.TgZ(6,"thead"),r.TgZ(7,"tr",3),r.TgZ(8,"th",4),r._uU(9),r.qZA(),r.qZA(),r.qZA(),r.YNc(10,p,3,2,"tr",5),r.qZA(),r.qZA(),r.TgZ(11,"ngx-spinner",6),r.TgZ(12,"p",7),r._uU(13," Loading... "),r.qZA(),r.qZA()),2&t&&(r.xp6(9),r.Oqu("Name"),r.xp6(1),r.Q6J("ngForOf",e.adminRoles),r.xp6(1),r.Q6J("fullScreen",!0))},directives:[o.sg,g.Ro],styles:[".table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{font-family:Open Sans,sans-serif;border:1px solid #ccc;border-collapse:collapse;margin:0;padding:0;width:100%;table-layout:fixed;font-size:16px}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:75px;height:75px;object-fit:contain}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   caption[_ngcontent-%COMP%]{font-size:24px;margin:.5em 0 .75em;font-weight:700}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background-color:#f8f8f8;border:1px solid #ddd;padding:.35em}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.625em;text-align:center;word-wrap:anywhere}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:14px;text-transform:uppercase;background-color:#2d2d2d;color:#dbe9ff}.table-container[_ngcontent-%COMP%]   .input-in-table[_ngcontent-%COMP%]{width:100%;height:45px;border:none;outline:none;font-size:16px;font-weight:700;padding:0 15px;box-sizing:border-box;overflow:hidden;background:#b9d8fb}@media screen and (min-width:670px) and (max-width:850px){.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;margin:0 auto;border:0}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:125px;height:125px;object-fit:contain}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   caption[_ngcontent-%COMP%]{font-size:1.3em}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{border:none;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:3px solid #ddd;display:block;margin-bottom:.625em}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom:1px solid #ddd;font-family:Open Sans,sans-serif;display:block;font-size:14.5px;text-align:right}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:before{content:attr(data-label);float:left;font-weight:700;font-size:13px;text-transform:uppercase;color:#2d2d2d}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-bottom:0}.table-container[_ngcontent-%COMP%]   .input-in-table[_ngcontent-%COMP%]{width:200px;height:42px;background:#b9d8fb}.table-container[_ngcontent-%COMP%]   .td-input-md[_ngcontent-%COMP%]:before{margin-top:14px}}@media screen and (max-width:600px){.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;margin:0 auto;border:0}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:125px;height:125px;object-fit:contain}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   caption[_ngcontent-%COMP%]{font-size:1.3em}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{border:none;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:3px solid #ddd;display:block;margin-bottom:.625em}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom:1px solid #ddd;font-family:Open Sans,sans-serif;display:block;font-size:14.5px;text-align:right}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:before{content:attr(data-label);float:left;font-weight:700;font-size:13px;text-transform:uppercase;color:#2d2d2d}.table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-bottom:0}.table-container[_ngcontent-%COMP%]   .input-in-table[_ngcontent-%COMP%]{width:200px;height:42px;background:#b9d8fb}.table-container[_ngcontent-%COMP%]   .td-input-md[_ngcontent-%COMP%]:before{margin-top:14px}}.top-action[_ngcontent-%COMP%]{text-align:right;margin-top:16px;padding-right:16px}.top-action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]     span{color:#fff}.header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;font-family:Open Sans,sans-serif}"]}),t})();var m=n(31041);const h=[{_id:"1",pageId:"2",routerLink:"/admin/customization",name:"Customize"},{_id:"2",pageId:"",routerLink:"/admin/products",name:"Product"},{_id:"3",pageId:"1",routerLink:"/admin/categories",name:"Categories"},{_id:"4",pageId:"4",routerLink:"/admin/sales",name:"Sales"},{_id:"6",pageId:"51",routerLink:"/admin/roles",name:"Roles"}],f=[{value:1,viewValue:"Read"},{value:2,viewValue:"Write"},{value:3,viewValue:"Delete"}];var b=n(35946),_=n(56507),O=n(35965),C=n(13070),P=n(9550),M=n(13841),x=n(84369),Z=n(87064),v=n(77307);function w(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"mat-option",15),r.NdJ("onSelectionChange",function(e){return r.CHM(t),r.oxw().onSelectPage(e)}),r._uU(1),r.qZA()}if(2&t){const t=e.$implicit;r.Q6J("value",t),r.xp6(1),r.hij(" ",t.name," ")}}function A(t,e){1&t&&(r.TgZ(0,"h4"),r._uU(1,"Pages List and Access"),r.qZA())}function q(t,e){if(1&t&&(r.TgZ(0,"mat-option",23),r._uU(1),r.qZA()),2&t){const t=e.$implicit;r.Q6J("value",t.value),r.xp6(1),r.hij(" ",t.viewValue," ")}}function y(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"div",16),r.TgZ(1,"mat-form-field",17),r.TgZ(2,"mat-label"),r._uU(3,"Page Url"),r.qZA(),r._UZ(4,"input",18),r.TgZ(5,"mat-error"),r._uU(6,"This field is required"),r.qZA(),r.qZA(),r.TgZ(7,"mat-form-field",17),r.TgZ(8,"mat-label"),r._uU(9,"Modify Access"),r.qZA(),r.TgZ(10,"mat-select",19),r.YNc(11,q,2,2,"mat-option",20),r.qZA(),r.TgZ(12,"mat-error"),r._uU(13,"This field is required."),r.qZA(),r.qZA(),r.TgZ(14,"button",21),r.NdJ("click",function(){const e=r.CHM(t).index;return r.oxw().removePagesField(e)}),r.TgZ(15,"mat-icon",22),r._uU(16,"delete"),r.qZA(),r.qZA(),r.qZA()}if(2&t){const t=e.index,n=r.oxw();r.Q6J("formGroupName",t),r.xp6(11),r.Q6J("ngForOf",n.modifyAccess)}}let T=(()=>{class t{constructor(t,e,n,o,i,a,r){this.fb=t,this.activatedRoute=e,this.adminDataService=n,this.adminService=o,this.uiService=i,this.utilsService=a,this.spinner=r,this.pages=[],this.modifyAccess=[],this.selectedPages=[]}ngOnInit(){this.initFormBuilder(),this.pages=h,this.modifyAccess=f,this.activatedRoute.paramMap.subscribe(t=>{this.id=t.get("id"),this.id&&this.getSingleRoleById()})}initFormBuilder(){this.dataForm=this.fb.group({name:[null,m.kI.required],slug:[null],priority:[null,m.kI.required],access:this.fb.array([])}),this.pagesArray=this.dataForm.get("access")}setFormValue(){const t=this.role.access;this.selectedPages=this.pages.filter(e=>t.some(t=>e.routerLink===t.page)),this.selectedPages.map(()=>{var t;const e=this.fb.group({page:[null],modify:[null]});(null===(t=this.dataForm)||void 0===t?void 0:t.get("access")).push(e)}),this.dataForm.patchValue(this.role)}addAdminRole(t){this.spinner.show(),this.adminDataService.addAdminRole(t).subscribe(t=>{this.spinner.hide(),this.uiService.success(t.message)},t=>{this.spinner.hide(),console.log(t)})}getSingleRoleById(){this.spinner.show(),this.adminDataService.getSingleRoleById(this.id).subscribe(t=>{this.role=t.data,this.spinner.hide(),this.setFormValue()},t=>{this.spinner.hide(),console.log(t)})}editAdminRole(t){this.spinner.show(),this.adminDataService.editAdminRole(t).subscribe(t=>{this.uiService.success(t.message)},t=>{this.spinner.hide(),console.log(t)})}onSelectPage(t){var e;if(t.isUserInput&&-1===this.selectedPages.findIndex(e=>e._id===t.source.value._id)){this.selectedPages.push(t.source.value);const n=this.fb.group({page:t.source.value.routerLink,pageId:t.source.value.pageId,modify:[null,m.kI.required]});(null===(e=this.dataForm)||void 0===e?void 0:e.get("access")).push(n)}}removePagesField(t){var e;null===(e=this.pagesArray)||void 0===e||e.removeAt(t),this.selectedPages.splice(t,1)}onSubmit(){var t;if(this.dataForm.invalid)return void this.uiService.warn("Please filed all the required field");const e=this.utilsService.slugWithoutSymbol(null===(t=this.dataForm)||void 0===t?void 0:t.value.name),n=Object.assign(Object.assign({},this.dataForm.value),{slug:e});if(this.role){const t=Object.assign(Object.assign({},n),{_id:this.role._id});this.editAdminRole(t)}else this.addAdminRole(n)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(m.qu),r.Y36(i.gz),r.Y36(l.O),r.Y36(b.l),r.Y36(d.F),r.Y36(_.F),r.Y36(g.t2))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-add-user"]],decls:30,vars:5,consts:[["fxLayout","row wrap",3,"formGroup","ngSubmit"],["appearance","outline","fxFlex","50",1,"px-2"],["formControlName","name","matInput","","placeholder","Enter role name","required",""],["formControlName","priority","matInput","","placeholder","Enter priority number","type","number","required",""],["appearance","outline","fxFlex","100",1,"px-2"],["required",""],[3,"value","onSelectionChange",4,"ngFor","ngForOf"],["formArrayName","access"],[1,"title","px-2"],[4,"ngIf"],["class","table-row",3,"formGroupName",4,"ngFor","ngForOf"],[1,"action","px-2"],["mat-raised-button","","color","primary","type","submit"],["bdColor","rgba(0,0,0,0.25)","size","medium","color","#fff","type","ball-clip-rotate",2,"width","100vw","height","100vh",3,"fullScreen"],[2,"color","white"],[3,"value","onSelectionChange"],[1,"table-row",3,"formGroupName"],["appearance","outline","fxFlex","50",1,"px-2","w-100"],["formControlName","page","matInput","","placeholder","page","type","text","readonly",""],["formControlName","modify","required","","multiple",""],[3,"value",4,"ngFor","ngForOf"],["mat-mini-fab","","color","warn",2,"margin-top","12px",3,"click"],[2,"color","#fff"],[3,"value"]],template:function(t,e){1&t&&(r.TgZ(0,"form",0),r.NdJ("ngSubmit",function(){return e.onSubmit()}),r.TgZ(1,"mat-form-field",1),r.TgZ(2,"mat-label"),r._uU(3,"Role Name"),r.qZA(),r._UZ(4,"input",2),r.TgZ(5,"mat-error"),r._uU(6,"This field is required"),r.qZA(),r.qZA(),r.TgZ(7,"mat-form-field",1),r.TgZ(8,"mat-label"),r._uU(9,"Priority"),r.qZA(),r._UZ(10,"input",3),r.TgZ(11,"mat-error"),r._uU(12,"This field is required"),r.qZA(),r.qZA(),r.TgZ(13,"mat-form-field",4),r.TgZ(14,"mat-label"),r._uU(15,"Select page"),r.qZA(),r.TgZ(16,"mat-select",5),r.YNc(17,w,2,2,"mat-option",6),r.qZA(),r.TgZ(18,"mat-error"),r._uU(19,"This field is required."),r.qZA(),r.qZA(),r.ynx(20,7),r.TgZ(21,"div",8),r.YNc(22,A,2,0,"h4",9),r.qZA(),r.YNc(23,y,17,2,"div",10),r.BQk(),r.TgZ(24,"div",11),r.TgZ(25,"button",12),r._uU(26,"Add User"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(27,"ngx-spinner",13),r.TgZ(28,"p",14),r._uU(29," Loading... "),r.qZA(),r.qZA()),2&t&&(r.Q6J("formGroup",e.dataForm),r.xp6(17),r.Q6J("ngForOf",e.pages),r.xp6(5),r.Q6J("ngIf",(null==e.pagesArray?null:e.pagesArray.controls.length)>0),r.xp6(1),r.Q6J("ngForOf",null==e.pagesArray?null:e.pagesArray.controls),r.xp6(4),r.Q6J("fullScreen",!0))},directives:[m._Y,m.JL,O.xw,m.sg,C.KE,O.yH,C.hX,m.Fj,P.Nt,m.JJ,m.u,m.Q7,C.TO,m.wV,M.gD,o.sg,m.CE,o.O5,x.lW,g.Ro,Z.ey,m.x0,v.Hw],styles:["form[_ngcontent-%COMP%]{max-width:850px;margin:45px auto}.table-row[_ngcontent-%COMP%], .title[_ngcontent-%COMP%], form[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}.title[_ngcontent-%COMP%]{padding-bottom:10px}.title[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#ff8b10}.action[_ngcontent-%COMP%]{width:100%;display:flex;margin:12px 0}.action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]     span{color:#fff}"]}),t})();const S=[{path:"",component:u},{path:"add-new-role",component:T},{path:"edit-role/:id",component:T}];let F=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[i.Bz.forChild(S)],i.Bz]}),t})();var k=n(56861),U=n(77154);let I=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[o.ez,F,m.UX,k.q,U.o9,g.ef]]}),t})()}}]);